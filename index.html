<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Show VÃ©lo 2026</title>

<style>
:root{
  --bg:#ffffff;
  --text:#111827;
  --muted:#6b7280;
  --border:#e5e7eb;
  --soft:#f3f4f6;
  --fill:#111827;
  --success:#16a34a;
  --radius:18px;
}
[data-theme="dark"]{
  --bg:#0f172a;
  --text:#f8fafc;
  --muted:#94a3b8;
  --border:#1e293b;
  --soft:#020617;
  --fill:#38bdf8;
}

body{
  margin:0;
  padding:18px;
  background:var(--soft);
  font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
}

.wrap{max-width:1100px;margin:auto;}
.tools{display:flex;gap:8px;margin-bottom:12px;}

.card{
  background:var(--bg);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:0 8px 26px rgba(0,0,0,.06);
  overflow:hidden;
  margin-bottom:16px;
}

.pad{padding:20px;}
.top{display:flex;justify-content:space-between;gap:12px;}
h1{margin:0;font-size:22px;}
h2{margin-top:0;}
h3{margin-top:20px;}

.sub{color:var(--muted);font-size:13px;}
.amount{font-weight:900;font-size:18px;}

.bar{margin-top:14px;height:14px;background:var(--soft);border-radius:999px;overflow:hidden;}
.fill{height:100%;width:0%;background:var(--fill);transition:width .8s ease;}

.row{display:flex;justify-content:space-between;margin-top:10px;font-size:12px;color:var(--muted);}
.pill{border:1px solid var(--border);padding:3px 9px;border-radius:999px;}

.grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:14px;}
.box{border:1px solid var(--border);border-radius:14px;padding:12px;}

.btn{
  padding:10px 12px;
  border-radius:12px;
  border:1px solid var(--border);
  background:#fff;
  font-weight:700;
  cursor:pointer;
}
.btn.primary{background:var(--fill);color:#fff;}
.btn.success{background:var(--success);color:#fff;}

.story{
  font-size:14px;
  line-height:1.7;
  margin-top:12px;
}

/* HERO */
.hero{
  height:340px;
  display:flex;
  align-items:flex-end;
  padding:20px;
  color:white;
  font-size:26px;
  font-weight:900;
  background:
    linear-gradient(to top, rgba(0,0,0,.65), rgba(0,0,0,0)),
    url("img/POSTER.jpg") center/cover,
    #333;
}

/* CAROUSEL */
.carousel{
  position:relative;
  overflow:hidden;
  border-radius:16px;
  margin:18px 0;
  height:280px;
}
.carousel-track{
  display:flex;
  height:100%;
  transition:transform .6s ease;
}
.carousel-slide{
  min-width:100%;
  background-size:cover;
  background-position:center;
  background-color:#333;
}
.carousel-dots{
  position:absolute;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:6px;
}
.carousel-dots span{
  width:10px;
  height:10px;
  border-radius:50%;
  background:rgba(255,255,255,.4);
}
.carousel-dots .active{background:white;}

.qrWrap{
  display:flex;
  gap:14px;
  align-items:center;
  margin-top:14px;
}
.qr{
  width:96px;
  height:96px;
  border-radius:14px;
  border:1px solid var(--border);
  background:var(--soft);
}
.small{font-size:12px;color:var(--muted);}
</style>
</head>

<body>
<div class="wrap">

<div class="tools">
  <button class="btn" id="toggleTheme">ðŸŒ™</button>
  <button class="btn" id="toggleLang">FR / EN</button>
</div>

<!-- HERO -->
<div class="card hero">
  Show VÃ©lo 2026
</div>

<!-- CROWDFUNDING -->
<div class="card">
  <div class="pad">
    <div class="top">
      <div>
        <h1 id="title"></h1>
        <div class="sub">
          <span id="goalLbl"></span> : <span id="goalTxt"></span> â€¢
          <span id="minLbl"></span> : <span id="minTxt"></span> â€¢
          <span id="endLbl"></span> : <span id="endTxt"></span>
        </div>
      </div>
      <div class="amount" id="currentTxt">â€”</div>
    </div>

    <div class="bar"><div class="fill" id="fill"></div></div>

    <div class="row">
      <div><span id="updatedLbl"></span> : <strong id="updatedTxt"></strong></div>
      <div class="pill" id="daysLeft"></div>
    </div>

    <div class="grid">
      <div class="box">
        <div class="small" id="minMilestoneLbl"></div>
        <div id="minStatus"></div>
      </div>
      <div class="box">
        <div class="small" id="remainingLbl"></div>
        <div id="remainingTxt"></div>
      </div>
    </div>

    <button class="btn primary" id="btnIban"></button>

    <div class="qrWrap" id="qrWrap" style="display:none;">
      <img class="qr" id="qrImg">
      <div class="small">
        <strong>Payconiq</strong><br>
        Scan du QR code (montant libre)<br>
        <code>Show VÃ©lo 2026</code>
      </div>
    </div>

    <div class="small">
      <span id="ibanMsgLbl"></span><br>
      <code>Show VÃ©lo 2026</code>
    </div>

    <div class="small" id="statusTxt"></div>
  </div>
</div>

<!-- PRESENTATION -->
<div class="card pad">
  <h2 id="storyTitle"></h2>
  <p class="story" id="storyIntro"></p>

  <div class="carousel">
    <div class="carousel-track" id="carouselTrack">
      <div class="carousel-slide" style="background-image:url('img/show1.jpg')"></div>
      <div class="carousel-slide" style="background-image:url('img/show2.jpg')"></div>
      <div class="carousel-slide" style="background-image:url('img/show3.jpg')"></div>
    </div>
    <div class="carousel-dots" id="carouselDots"></div>
  </div>

  <p class="story" id="storyHistory"></p>
  <p class="story" id="storyShow"></p>
  <p class="story" id="storyFigures"></p>
  <p class="story" id="storyTech"></p>

  <h3 id="fundingTitle"></h3>
  <p class="story" id="fundingTxt"></p>

  <h3 id="sponsorTitle"></h3>
  <p class="story" id="sponsorTxt"></p>
</div>

</div>

<script>
/* ========= CONFIG ========= */
const DATA_URL="https://script.google.com/macros/s/AKfycbx1iVPVJljLOlPqTEr70yCWfVn6z61xA5FxZSJBhzZtUQKBP1B4Xe5GUZNi9Nir4xNR/exec";
const TOKEN="4444";

/* ========= LANGUES ========= */
const LANGS={
fr:{
 title:"Soutenir Show VÃ©lo 2026",
 goal:"Objectif",min:"Minimum",end:"Date limite",
 updated:"Mis Ã  jour",
 minMilestone:"Seuil minimum",
 remaining:"Reste Ã  atteindre",
 iban:"Virement bancaire (copier IBAN)",
 ibanMsg:"Communication suggÃ©rÃ©e",
 thanks:"ðŸ™ Merci pour votre soutien !",
 reached:"ðŸŽ‰ Objectif atteint !",
 story:{
  title:"Le projet",
  intro:"Le Show VÃ©lo est un spectacle dâ€™acrobaties Ã  vÃ©lo prÃ©parÃ© pendant un an par 60 scouts.",
  history:"Tous les trois ans depuis 1942, la cour du CollÃ¨ge Saint-Michel devient une scÃ¨ne de spectacle.",
  show:"Musique, lumiÃ¨re et figures synchronisÃ©es plongent le public dans une ambiance unique.",
  figures:"Des figures collectives et acrobaties jusquâ€™Ã  4 scouts sur un mÃªme vÃ©lo.",
  tech:"Son, lumiÃ¨res, pyrotechnie : une organisation technique hors du commun.",
  fundingTitle:"Ã€ quoi servira le financement",
  funding:"Principalement au son, Ã  la lumiÃ¨re, aux impressions et Ã  lâ€™entretien des vÃ©los.",
  sponsorTitle:"Sponsoring",
  sponsor:"Les entreprises peuvent afficher leur logo sur nos supports."
 }
},
en:{ /* version EN possible plus tard */ }
};

let lang=localStorage.lang||"fr";
let theme=localStorage.theme||"light";
document.documentElement.dataset.theme=theme;

const set=(id,v)=>document.getElementById(id).textContent=v;
const fmt=n=>new Intl.NumberFormat("fr-BE",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(n);

function applyLang(){
 const L=LANGS[lang];
 set("title",L.title);
 set("goalLbl",L.goal);
 set("minLbl",L.min);
 set("endLbl",L.end);
 set("updatedLbl",L.updated);
 set("minMilestoneLbl",L.minMilestone);
 set("remainingLbl",L.remaining);
 set("btnIban",L.iban);
 set("ibanMsgLbl",L.ibanMsg);
 const S=L.story;
 set("storyTitle",S.title);
 set("storyIntro",S.intro);
 set("storyHistory",S.history);
 set("storyShow",S.show);
 set("storyFigures",S.figures);
 set("storyTech",S.tech);
 set("fundingTitle",S.fundingTitle);
 set("fundingTxt",S.funding);
 set("sponsorTitle",S.sponsorTitle);
 set("sponsorTxt",S.sponsor);
}

/* ========= DATA ========= */
async function loadData(){
 const r=await fetch(`${DATA_URL}?token=${TOKEN}`);
 const d=await r.json();

 const pct=Math.min(100,Math.round(d.current/d.goal*100));
 document.getElementById("fill").style.width=pct+"%";
 set("currentTxt",`${fmt(d.current)} (${pct}%)`);
 set("goalTxt",fmt(d.goal));
 set("minTxt",fmt(d.minimum));
 set("remainingTxt",fmt(Math.max(0,d.goal-d.current)));
 set("endTxt",d.endDate);
 set("updatedTxt",d.updated);
 set("minStatus",d.current>=d.minimum?"âœ… Atteint":fmt(d.minimum-d.current));
 document.getElementById("daysLeft").textContent=
   Math.ceil((new Date(d.endDate)-Date.now())/86400000)+" jours";

 if(d.payconiqQr){
  document.getElementById("qrImg").src=d.payconiqQr;
  document.getElementById("qrWrap").style.display="flex";
 }

 const btn=document.getElementById("btnIban");
 btn.onclick=async()=>{
  await navigator.clipboard.writeText(d.iban);
  btn.textContent="IBAN copiÃ© âœ…";
  btn.classList.add("success");
  setTimeout(()=>{btn.classList.remove("success");applyLang();},1500);
 };

 set("statusTxt",d.current>=d.goal?LANGS[lang].reached:LANGS[lang].thanks);
}

/* ========= CAROUSEL ========= */
const track=document.getElementById("carouselTrack");
const dots=document.getElementById("carouselDots");
[...track.children].forEach((_,i)=>{
 const d=document.createElement("span");
 if(i===0)d.classList.add("active");
 dots.appendChild(d);
});
let index=0;
setInterval(()=>{
 index=(index+1)%track.children.length;
 track.style.transform=`translateX(-${index*100}%)`;
 [...dots.children].forEach((d,i)=>d.classList.toggle("active",i===index));
},4000);

/* ========= UI ========= */
document.getElementById("toggleTheme").onclick=()=>{
 theme=theme==="light"?"dark":"light";
 document.documentElement.dataset.theme=theme;
 localStorage.theme=theme;
};
document.getElementById("toggleLang").onclick=()=>{
 lang=lang==="fr"?"en":"fr";
 localStorage.lang=lang;
 applyLang();
};

applyLang();
loadData();
</script>
</body>
</html>
